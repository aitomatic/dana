# Agent, Resource, Workflow â€“ user-level scenarios (design-first)
# This file demonstrates desired Dana syntax/behavior for:
# 1) agent singletons with built-in conversational memory across TUI sessions
# 2) (to be added) resource declaration/usage patterns
# 3) (to be added) workflow declaration/usage patterns

# --- Session 1 (Dana TUI) ----------------------------------------------------
# In a fresh TUI session, the user types the following lines interactively.

agent Neo

# Start chatting; agent should create/append to a long-term conversational
# memory for the user identity and important facts.
Neo.chat("hi, my name is Christopher")

Neo.chat("note that my favorite color is teal")

# End Session 1 (user exits the TUI)


# --- Session 2 (Dana TUI, new process) --------------------------------------
# In a new TUI session, the user again types the following.

agent Neo
Neo.chat("what is my name?")  # Expected answer should mention "Christopher"

# Optional checks to validate remembered preferences/facts:
Neo.chat("what is my favorite color?")

Neo.reason("I am in Sapporo. Is it too hot to go outside today? I prefer temperature between 20 and 25 C.")

resource WeatherInfo:
    type = 'mcp'
    url = 'http://127.0.0.1:8000/mcp'

Neo.reason("I am in Sapporo. Is it too hot to go outside today? I prefer temperature between 20 and 25 C.", resources=[WeatherInfo])

Neo.solve("Is Tokyo Electron's financial liquidity good?")

resource TelAnnualReport:
    path = '2024-TEL-AR.pdf'

Neo.solve("Is Tokyo Electron's financial liquidity good?", resources=[TelAnnualReport])

from knows.financial_analysis import get_cash_and_equiv, get_st_inv, get_recvable, get_curr_liabs

workflow CalcQuickRatio:
    pipeline = [
        ([get_cash_and_equiv, get_st_inv, get_recvable] | sum),
        get_curr_liabs
    ] | (lambda x, y: x / y)

    description = "Calculate Quick Ratio by summing Cash & Cash Equivalents, Short-Term Investments and Accounts Receivable, then dividing the sum by Current Liabilities"

Neo.solve("Is Tokyo Electron's financial liquidity good?", resources=[TelAnnualReport], workflow=CalcQuickRatio)
