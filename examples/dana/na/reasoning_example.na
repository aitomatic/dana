# DANA Example: LLM Reasoning with reason()
# This example demonstrates how to use the reason() statement to access LLM capabilities

# Set log level to INFO to see more details
log.setLevel(INFO)

# Simple reasoning example without context
log.info("Basic reasoning example:")
private.result = reason("What is the relationship between temperature and pressure in a gas?")
log.info(f"Basic reasoning result: {private.result}")

# Example with context variables
log.info("\nReasoning with context variables:")
private.temperature_readings = [72, 75, 78, 80, 83, 82, 79, 76]
private.equipment_type = "Industrial HVAC System"
private.location = "Manufacturing Floor C"

private.analysis = reason(f"Analyze this temperature pattern ({private.temperature_readings}) for {private.equipment_type} at {private.location} and recommend actions")
log.info(f"Analysis results: {private.analysis}")

# Using reason() with format specification for structured output
log.info("\nReasoning with JSON format:")
private.json_result = reason("Generate a maintenance checklist with 3 items")
log.info(f"JSON result type: {private.json_result}")

# Using f-strings in reason() prompts
log.info("\nReasoning with f-strings:")
private.query_topic = "thermal expansion"
private.explanation = reason(f"Explain the concept of {private.query_topic} in simple terms")
log.info(f"Explanation of {private.query_topic}: {private.explanation}")

# Using reason() in conditional logic
log.info("\nReasoning in conditional logic:")
private.temperature_threshold = 80
private.max_temp = 83  # Hardcoded max from the array for simplicity
if private.max_temp > private.temperature_threshold:
    private.assessment = reason(f"Is a temperature of {private.max_temp}Â°F concerning?")
    
    # Simple string check for "yes"
    if private.assessment == "yes":
        log.warn(f"Temperature concern detected: {private.assessment}")
    else:
        log.info(f"Temperature assessment: {private.assessment}")
else:
    log.info("Temperature within normal range.")

# Working with temperature parameter
log.info("\nReasoning with different temperatures:")
private.creative_ideas = reason("Suggest innovative ways to improve HVAC efficiency")
log.info(f"Creative ideas (temp=0.9): {private.creative_ideas}")

private.factual_analysis = reason("Suggest proven ways to improve HVAC efficiency")
log.info(f"Factual analysis (temp=0.1): {private.factual_analysis}")

# End of example
log.info("\nReasoning example completed successfully.")