# Dana Agent Keyword - Type Hint Adaptation Example
# This example demonstrates how agents adapt responses based on type hints

log("ğŸš€ Dana Agent Keyword - Type Hint Adaptation Example")
log("=" * 50)

# ============================================================================
# 1. AGENT DEFINITION
# ============================================================================

log("\nğŸ“‹ 1. Agent Definition")
log("-" * 30)

# Define an agent with built-in intelligence
agent DataAnalyst:
    domain: str = "manufacturing"
    expertise_level: str = "senior"
    analysis_type: str = "statistical"

log("âœ… Agent type 'DataAnalyst' defined")

# ============================================================================
# 2. DEFAULT RESPONSE BEHAVIOR
# ============================================================================

log("\nğŸ”„ 2. Default Response Behavior")
log("-" * 30)

# Create agent instance
analyst = DataAnalyst(
    domain="semiconductor",
    expertise_level="expert",
    analysis_type="predictive"
)

log(f"âœ… Created analyst: {analyst}")

# Default plan() behavior (returns list)
log("\nğŸ“‹ Testing default plan() behavior:")
default_plan = analyst.plan(
    "Analyze production yield data for Q1 2024",
    context={
        "data_source": "production_database",
        "time_period": "Q1_2024"
    }
)

log(f"ğŸ“ Default Plan Result: {default_plan}")
log(f"ğŸ“Š Default Plan Type: {type(default_plan)}")

# Default solve() behavior (returns dict)
log("\nğŸ” Testing default solve() behavior:")
default_solve = analyst.solve(
    "Declining yield trend in etching process",
    context={
        "trend_period": "3_months",
        "severity": "moderate"
    }
)

log(f"ğŸ’¡ Default Solve Result: {default_solve}")
log(f"ğŸ“Š Default Solve Type: {type(default_solve)}")

# ============================================================================
# 3. EXPLICIT TYPE HINTS - LIST RESPONSES
# ============================================================================

log("\nğŸ“‹ 3. Explicit Type Hints - List Responses")
log("-" * 30)

# Explicit list type hint for plan()
log("\nğŸ“‹ Testing plan() with explicit list type hint:")
plan_steps: list = analyst.plan(
    "Optimize manufacturing process parameters",
    context={
        "process_type": "plasma_etching",
        "optimization_goal": "reduce_defects"
    }
)

log(f"ğŸ“ List Plan Result: {plan_steps}")
log(f"ğŸ“Š List Plan Type: {type(plan_steps)}")

# Explicit list type hint for solve()
log("\nğŸ” Testing solve() with explicit list type hint:")
solve_steps: list = analyst.solve(
    "Root cause analysis for equipment failures",
    context={
        "failure_pattern": "intermittent",
        "affected_equipment": ["ETCH-001", "ETCH-002"]
    }
)

log(f"ğŸ’¡ List Solve Result: {solve_steps}")
log(f"ğŸ“Š List Solve Type: {type(solve_steps)}")

# ============================================================================
# 4. EXPLICIT TYPE HINTS - DICT RESPONSES
# ============================================================================

log("\nğŸ“Š 4. Explicit Type Hints - Dict Responses")
log("-" * 30)

# Explicit dict type hint for plan()
log("\nğŸ“‹ Testing plan() with explicit dict type hint:")
plan_dict: dict = analyst.plan(
    "Comprehensive data analysis workflow",
    context={
        "analysis_scope": "full_production_line",
        "data_volume": "large"
    }
)

log(f"ğŸ“ Dict Plan Result: {plan_dict}")
log(f"ğŸ“Š Dict Plan Type: {type(plan_dict)}")

# Explicit dict type hint for solve()
log("\nğŸ” Testing solve() with explicit dict type hint:")
solve_dict: dict = analyst.solve(
    "Statistical process control implementation",
    context={
        "control_charts": ["xbar_r", "p_chart"],
        "sample_size": 30
    }
)

log(f"ğŸ’¡ Dict Solve Result: {solve_dict}")
log(f"ğŸ“Š Dict Solve Type: {type(solve_dict)}")

# ============================================================================
# 5. TYPE HINT DETECTION AND ADAPTATION
# ============================================================================

log("\nğŸ¯ 5. Type Hint Detection and Adaptation")
log("-" * 30)

# Test different variable assignments to see type adaptation
log("\nğŸ”„ Testing type adaptation through assignment:")

# Assignment to list variable
log("\nğŸ“‹ Assignment to list variable:")
list_result = analyst.plan("Simple analysis task")
log(f"ğŸ“ List Assignment Result: {list_result}")
log(f"ğŸ“Š List Assignment Type: {type(list_result)}")

# Assignment to dict variable
log("\nğŸ“‹ Assignment to dict variable:")
dict_result = analyst.plan("Detailed analysis task")
log(f"ğŸ“ Dict Assignment Result: {dict_result}")
log(f"ğŸ“Š Dict Assignment Type: {type(dict_result)}")

# ============================================================================
# 6. TYPE HINT BEST PRACTICES
# ============================================================================

log("\nğŸ’¡ 6. Type Hint Best Practices")
log("-" * 30)

log("""
âœ… Best Practices for Type Hints with Agents:

1. **Explicit Type Hints**: Use when you need specific format
   âœ… plan_steps: list = agent.plan("task")
   âœ… analysis: dict = agent.solve("problem")

2. **Consistent Naming**: Use descriptive variable names
   âœ… plan_steps: list = agent.plan("task")
   âœ… plan_details: dict = agent.plan("task")

3. **Type Safety**: Leverage Dana's type system
   âœ… detailed_analysis: dict[str, list[str]] = agent.plan("task")

4. **Adaptive Responses**: Use when format doesn't matter
   âœ… result = agent.plan("task")  # Agent chooses best format
""")

# ============================================================================
# 7. SUMMARY
# ============================================================================

log("\nğŸ¯ 7. Summary")
log("-" * 30)

log("""
âœ… What we've learned:
- Default response behavior (list for plan, dict for solve)
- Explicit type hint adaptation
- Type hint detection and adaptation
- Best practices for type hints

ğŸš€ Key Benefits:
- Flexible response formats based on needs
- Type safety with Dana's type system
- Context-aware intelligence
- Consistent API with adaptive behavior

ğŸš€ Next steps:
- Learn memory systems (04_memory_systems.na)
""")

log("\nğŸ‰ Type Hint Adaptation Example Complete!")
log("Agents now adapt their responses based on your type hints!") 